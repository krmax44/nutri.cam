(function(e){function t(t){for(var a,c,s=t[0],i=t[1],d=t[2],u=0,b=[];u<s.length;u++)c=s[u],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&b.push(o[c][0]),o[c]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);l&&l(t);while(b.length)b.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var i=n[s];0!==o[i]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={app:0},r=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/veganscan/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var l=i;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1456:function(e){e.exports=JSON.parse('{"en":{"error":"Error","productNotFound":"We weren\'t able to find that product.","loading":"Loading","viewOnOpenFoodFacts":"View on OpenFoodFacts...","productCategories":{"vegan":"vegan","vegetarian":"vegetarian (not vegan)","vegetarianUnknown":"possibly vegetarisch","veganUnknown":"possibly vegan","notVegan":"not vegan","labeledAs":"The product is labeled as {label}.","analysedAs":"The product was categorized as {label} by an automatic ingredient analysis."}},"de":{"error":"Fehler","productNotFound":"Wir konnten das Produkt nicht finden.","loading":"Lädt","viewOnOpenFoodFacts":"Auf OpenFoodFacts ansehen...","productCategories":{"vegan":"vegan","vegetarian":"vegetarisch (nicht vegan)","vegetarianUnknown":"nicht sicher vegetarisch","veganUnknown":"nicht sicher vegan","notVegan":"nicht vegan","labeledAs":"Das Produkt ist als {label} gekennzeichnet.","analysedAs":"Die automatische Zutatenanalyse ergab, dass das Produkt {label} ist."}}}')},"1d54":function(e,t,n){"use strict";n("c770")},"3ac5":function(e,t,n){},"443c":function(e,t,n){"use strict";n("3ac5")},a47f:function(e,t,n){},c770:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("a79d");var a=n("7a23");function o(e,t,n,o,r,c){const s=Object(a["t"])("CameraView"),i=Object(a["t"])("ProductView");return Object(a["p"])(),Object(a["e"])(a["a"],null,[Object(a["h"])(s,{onCode:e.receivedCode},null,8,["onCode"]),Object(a["h"])(i,{code:e.code,panelHidden:e.panelHidden},null,8,["code","panelHidden"])],64)}n("ddb0");var r=n("da22"),c=n.n(r);const s=Object(a["w"])("data-v-98984d4a");Object(a["r"])("data-v-98984d4a");const i={ref:"video"},d={key:0,class:"fixed top-0 right-0 p-4"},l=Object(a["h"])("img",{src:c.a,class:"h-6 w-6"},null,-1);Object(a["q"])();const u=s((function(e,t,n,o,r,c){return Object(a["p"])(),Object(a["e"])(a["a"],null,[Object(a["h"])("video",i,null,512),e.cams>1?(Object(a["p"])(),Object(a["e"])("div",d,[Object(a["h"])("div",{class:"bg-white rounded-full shadow-md p-2",onClick:t[1]||(t[1]=(...t)=>e.changeCamera(...t))},[l])])):Object(a["f"])("",!0)],64)}));var b=n("e588"),p=Object(a["i"])({data(){return{codeReader:new b["BrowserMultiFormatReader"],camIndex:0,cams:0}},mounted(){const e=localStorage.getItem("camid");this.setupScanner(e||void 0)},methods:{setupScanner(e){this.codeReader=new b["BrowserMultiFormatReader"],this.codeReader.listVideoInputDevices().then(t=>{if(0===t.length)return this.$emit("no-cameras");let n="";n=t.find(t=>t.deviceId===e)?e:t[this.camIndex].deviceId,this.cams=t.length,localStorage.setItem("camid",n),this.codeReader.decodeFromVideoDevice(n,this.$refs.video,(e,t)=>{e&&this.$emit("code",e.getText()),!t||t instanceof b["NotFoundException"]||console.error(t)})}).catch(e=>{console.error(e)})},changeCamera(){console.log(this.codeReader),this.codeReader.reset(),this.camIndex++,this.camIndex>=this.cams&&(this.camIndex=0),this.setupScanner()}}});n("443c");p.render=u,p.__scopeId="data-v-98984d4a";var h=p;const g=Object(a["w"])("data-v-2732bc68");Object(a["r"])("data-v-2732bc68");const f={key:0,class:"flex absolute inset-0 justify-center text-center flex-col bg-white"},v={class:"text-3xl mb-1"},O={key:0},j={key:1,class:"flex absolute inset-0 justify-center text-center flex-col bg-white"},m={class:"flex"},w={class:"flex-1"},y={class:"text-3xl mb-1"},x=Object(a["g"])(" ");Object(a["q"])();const k=g((function(e,t,n,o,r,c){const s=Object(a["t"])("i18n-t");return Object(a["p"])(),Object(a["e"])("div",{class:["panel",{gone:e.panelHidden,"overflow-hidden":e.loading}]},[e.error?(Object(a["p"])(),Object(a["e"])("div",f,[Object(a["h"])("h2",v,Object(a["u"])(e.$t("error")),1),e.error instanceof e.errors.ProductNotFoundError?(Object(a["p"])(),Object(a["e"])("p",O,Object(a["u"])(e.$t("productNotFound")),1)):(Object(a["p"])(),Object(a["e"])("p",{key:1,textContent:e.error.message},null,8,["textContent"]))])):Object(a["f"])("",!0),e.loading?(Object(a["p"])(),Object(a["e"])("div",j,[Object(a["h"])("p",null,Object(a["u"])(e.$t("loading"))+" "+Object(a["u"])(e.code)+"...",1)])):Object(a["f"])("",!0),Object(a["h"])("div",m,[Object(a["h"])("div",w,[Object(a["h"])("h2",y,Object(a["u"])(e.title),1),Object(a["h"])("p",null,[Object(a["h"])(s,{keypath:"productCategories."+e.category},{label:g(()=>[Object(a["h"])("strong",null,Object(a["u"])(e.label),1)]),_:1},8,["keypath"]),x,Object(a["h"])("a",{href:"https://world.openfoodfacts.org/product/"+e.code,target:"_blank"},Object(a["u"])(e.$t("viewOnOpenFoodFacts")),9,["href"])])]),Object(a["h"])("div",null,[Object(a["h"])("img",{src:e.image,class:"h-16"},null,8,["src"])])])],2)}));class F extends Error{}var _=Object(a["i"])({props:{panelHidden:Boolean,code:String},data(){return{isVegan:void 0,title:"",category:"",label:"",image:"",loading:!1,error:!1,errors:{ProductNotFoundError:F}}},watch:{async code(){if(!this.loading){this.loading=!0;try{const e=await fetch(`https://world.openfoodfacts.org/api/v0/product/${this.code}.json`).then(e=>e.json());if("product found"!==e.status_verbose)throw new F;const t={"en:vegan":"vegan","en:vegetarian":"vegetarisch","en:vegetarian-status-unknown":"vegetarianUnknown","en:vegan-status-unknown":"veganUnknown","en:non-vegan":"notVegan"},n={labels_tags:"labeledAs",ingredients_analysis_tags:"analysedAs"};let a=!1;e:for(const o in n){const r=n[o];for(const n in t){const c=t[n];if(e.product[o].includes(n)){this.category=r,this.label=c,a=!0;break e}}}if(!a)throw new F;this.title=e.product.product_name_de,this.image=e.product.image_thumb_url,this.error=!1}catch(e){this.error=e}finally{this.loading=!1}}}}});n("d481");_.render=k,_.__scopeId="data-v-2732bc68";var C=_,P=n("84a2"),I=n.n(P),S=Object(a["i"])({name:"App",components:{CameraView:h,ProductView:C},setup(){const e=Object(a["s"])(!0),t=Object(a["s"])("0");function n(n){e.value=!1,t.value=n}const o=I()(n,1e3);return{receivedCode:o,code:t,panelHidden:e}}});n("1d54");S.render=o;var V=S,A=n("ab42"),R=n("1456"),$=Object(A["a"])({locale:navigator.language,fallbackLocale:"en",messages:R}),N=n("9483");Object(N["a"])("/veganscan/service-worker.js"),Object(a["d"])(V).use($).mount("#app")},d481:function(e,t,n){"use strict";n("a47f")},da22:function(e,t,n){e.exports=n.p+"img/camera-flip.824534fa.svg"}});
//# sourceMappingURL=app.063b9192.js.map